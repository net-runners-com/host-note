# HostNote 実装計画書

## 1. 開発方針

### 1.1 アジャイル・スクラム開発アプローチ
- **イテレーション**: 1週間スプリント
- **レビュー**: 各スプリント終了時に動作確認
- **レトロスペクティブ**: 改善点の洗い出し

### 1.2 完了の定義（Definition of Done）
- [ ] コードが実装され、動作確認済み
- [ ] TypeScript型エラーなし
- [ ] ESLintエラーなし
- [ ] 実機（iOS/Android）で動作確認済み
- [ ] エラーハンドリング実装済み
- [ ] コメント記載済み

### 1.3 開発優先度
- **P0 (Critical)**: MVP必須機能
- **P1 (High)**: Phase 1で実装
- **P2 (Medium)**: Phase 2で実装
- **P3 (Low)**: Phase 3で実装

---

## 2. エピック分解

### Epic 1: プロジェクト初期化・環境構築
- **目的**: 開発環境を整え、基盤を構築
- **期間**: Sprint 1
- **優先度**: P0

### Epic 2: データベース基盤構築
- **目的**: SQLiteデータベースとリポジトリパターンの実装
- **期間**: Sprint 1-2
- **優先度**: P0

### Epic 3: 姫管理機能
- **目的**: 姫の登録・編集・削除・一覧表示
- **期間**: Sprint 2-3
- **優先度**: P0

### Epic 4: キャスト管理機能
- **目的**: キャストの登録・編集・削除・一覧表示
- **期間**: Sprint 3-4
- **優先度**: P0

### Epic 5: 卓記録管理機能
- **目的**: 卓記録の作成・編集・削除・一覧表示
- **期間**: Sprint 4-5
- **優先度**: P0

### Epic 6: ホーム画面・ダッシュボード
- **目的**: 今日の予定、直近の卓記録、誕生日リストの表示
- **期間**: Sprint 5-6
- **優先度**: P0

### Epic 7: カレンダー機能
- **目的**: 月/週/日表示、来店履歴・予定の表示
- **期間**: Sprint 6-7
- **優先度**: P1

### Epic 8: 検索・フィルター機能
- **目的**: 姫・キャスト・卓記録の検索
- **期間**: Sprint 7
- **優先度**: P1

### Epic 9: 通知機能
- **目的**: 来店予定・誕生日の通知
- **期間**: Sprint 8
- **優先度**: P1

### Epic 10: テーマ・設定機能
- **目的**: 5種類のテーマ切り替え、通知設定
- **期間**: Sprint 8-9
- **優先度**: P1

### Epic 11: 写真・アバター機能
- **目的**: 写真撮影・選択、アバター自動生成
- **期間**: Sprint 9
- **優先度**: P2

### Epic 12: データバックアップ・復元
- **目的**: データのエクスポート・インポート
- **期間**: Sprint 10
- **優先度**: P2

---

## 3. ユーザーストーリー一覧

### 優先度: P0 (Critical) - MVP必須

#### US-001: プロジェクト初期化
- **As a** 開発者
- **I want to** Expo TypeScriptプロジェクトを初期化する
- **So that** 開発を開始できる

**受け入れ条件:**
- Expo プロジェクトが作成されている
- TypeScript設定が完了している
- 基本的なディレクトリ構造が作成されている
- 開発サーバーが起動できる

**技術タスク:**
1. `npx create-expo-app HostNote --template expo-template-blank-typescript`
2. 依存関係インストール（expo-router, expo-sqlite等）
3. ディレクトリ構造作成（src/, app/等）
4. tsconfig.json設定（パスエイリアス設定）
5. ESLint + Prettier設定

**見積もり:** 2時間  
**エピック:** Epic 1

---

#### US-002: データベーススキーマ作成
- **As a** 開発者
- **I want to** SQLiteデータベースのスキーマを定義・作成する
- **So that** データを永続化できる

**受け入れ条件:**
- 全テーブル（hime, cast, table_record, table_hime, table_cast, schedule, settings）が作成されている
- インデックスが適切に設定されている
- マイグレーション機能が実装されている
- 初期データ（設定）が挿入されている

**技術タスク:**
1. `src/database/schema.ts` 作成
2. CREATE TABLE文定義
3. `src/database/migrations.ts` 作成
4. `src/database/index.ts` でDB初期化処理
5. アプリ起動時のマイグレーション実行

**見積もり:** 4時間  
**エピック:** Epic 2

---

#### US-003: データベースリポジトリ実装
- **As a** 開発者
- **I want to** リポジトリパターンでデータベース操作を抽象化する
- **So that** データアクセスロジックを再利用できる

**受け入れ条件:**
- HimeRepository実装済み
- CastRepository実装済み
- TableRepository実装済み
- ScheduleRepository実装済み
- CRUD操作が動作する

**技術タスク:**
1. `src/database/repositories/HimeRepository.ts` 実装
2. `src/database/repositories/CastRepository.ts` 実装
3. `src/database/repositories/TableRepository.ts` 実装
4. `src/database/repositories/ScheduleRepository.ts` 実装
5. エラーハンドリング追加

**見積もり:** 6時間  
**エピック:** Epic 2

---

#### US-004: Zustand状態管理セットアップ
- **As a** 開発者
- **I want to** Zustandでグローバル状態管理をセットアップする
- **So that** コンポーネント間でデータを共有できる

**受け入れ条件:**
- himeStore作成済み
- castStore作成済み
- tableStore作成済み
- scheduleStore作成済み
- settingsStore作成済み

**技術タスク:**
1. `src/stores/himeStore.ts` 作成
2. `src/stores/castStore.ts` 作成
3. `src/stores/tableStore.ts` 作成
4. `src/stores/scheduleStore.ts` 作成
5. `src/stores/settingsStore.ts` 作成

**見積もり:** 3時間  
**エピック:** Epic 2

---

#### US-005: タブナビゲーション実装
- **As a** ユーザー
- **I want to** ボトムタブで画面を切り替えられる
- **So that** 各機能に素早くアクセスできる

**受け入れ条件:**
- 5つのタブ（ホーム、姫、キャスト、卓、カレンダー）が表示される
- タブアイコンが適切に表示される
- タブ切り替えがスムーズに動作する
- 選択中のタブがハイライトされる

**技術タスク:**
1. `app/(tabs)/_layout.tsx` 作成
2. タブ設定（アイコン、ラベル）
3. 各タブ画面の基本レイアウト作成
4. テーマカラー適用

**見積もり:** 2時間  
**エピック:** Epic 1

---

#### US-006: 姫一覧画面実装
- **As a** ユーザー
- **I want to** 登録済みの姫を一覧で見られる
- **So that** 素早く姫の情報を確認できる

**受け入れ条件:**
- 姫がカード形式で一覧表示される
- 名前、担当キャスト、お酒の好みが表示される
- 初回フラグ（🆕）が表示される
- スクロールがスムーズに動作する
- 空状態が適切に表示される

**技術タスク:**
1. `app/(tabs)/hime.tsx` 実装
2. `src/components/hime/HimeCard.tsx` 作成
3. FlatListでリスト表示
4. himeStoreからデータ取得
5. EmptyState コンポーネント作成

**見積もり:** 4時間  
**エピック:** Epic 3

---

#### US-007: 姫詳細画面実装
- **As a** ユーザー
- **I want to** 姫の詳細情報を見られる
- **So that** 細かい情報を確認できる

**受け入れ条件:**
- 全ての姫情報が表示される
- 写真/アバターが表示される
- SNS情報、誕生日が表示される
- 来店履歴が表示される
- 編集・削除ボタンが動作する

**技術タスク:**
1. `app/hime/[id].tsx` 実装
2. パラメータからIDを取得
3. HimeRepositoryからデータ取得
4. UI実装（ScrollView）
5. 編集・削除ボタンの実装

**見積もり:** 4時間  
**エピック:** Epic 3

---

#### US-008: 姫追加画面実装
- **As a** ユーザー
- **I want to** 新しい姫を登録できる
- **So that** 顧客情報を管理できる

**受け入れ条件:**
- 入力フォームが適切に表示される
- 名前（必須）、その他の項目が入力できる
- 担当キャストを選択できる
- バリデーションが動作する
- 保存ボタンでデータが登録される

**技術タスク:**
1. `app/hime/add.tsx` 実装
2. `src/components/hime/HimeForm.tsx` 作成
3. フォームバリデーション実装
4. キャスト選択Picker実装
5. himeStore.addHime() 呼び出し

**見積もり:** 5時間  
**エピック:** Epic 3

---

#### US-009: 姫編集画面実装
- **As a** ユーザー
- **I want to** 姫の情報を編集できる
- **So that** 情報を最新に保てる

**受け入れ条件:**
- 既存データがフォームに表示される
- 全ての項目が編集できる
- 保存ボタンで更新される
- キャンセルで元の画面に戻る

**技術タスク:**
1. `app/hime/edit/[id].tsx` 実装
2. HimeForm コンポーネントを再利用
3. 初期値設定
4. himeStore.updateHime() 呼び出し

**見積もり:** 3時間  
**エピック:** Epic 3

---

#### US-010: 姫削除機能実装
- **As a** ユーザー
- **I want to** 姫を削除できる
- **So that** 不要なデータを整理できる

**受け入れ条件:**
- 削除確認ダイアログが表示される
- 確認後に削除が実行される
- 関連データ（卓記録、スケジュール）も削除される
- 削除後に一覧画面に戻る

**技術タスク:**
1. 削除ボタン実装
2. Alert.alert() で確認ダイアログ
3. himeStore.deleteHime() 呼び出し
4. CASCADE削除の確認

**見積もり:** 2時間  
**エピック:** Epic 3

---

#### US-011: キャスト一覧画面実装
- **As a** ユーザー
- **I want to** 登録済みのキャストを一覧で見られる
- **So that** 素早くキャストの情報を確認できる

**受け入れ条件:**
- キャストがカード形式で一覧表示される
- 名前、メモが表示される
- スクロールがスムーズに動作する
- 空状態が適切に表示される

**技術タスク:**
1. `app/(tabs)/cast.tsx` 実装
2. `src/components/cast/CastCard.tsx` 作成
3. FlatListでリスト表示
4. castStoreからデータ取得

**見積もり:** 3時間  
**エピック:** Epic 4

---

#### US-012: キャスト詳細画面実装
- **As a** ユーザー
- **I want to** キャストの詳細情報を見られる
- **So that** 細かい情報を確認できる

**受け入れ条件:**
- 全てのキャスト情報が表示される
- 写真/アバターが表示される
- 担当している姫のリストが表示される
- 参加した卓記録が表示される

**技術タスク:**
1. `app/cast/[id].tsx` 実装
2. CastRepositoryからデータ取得
3. 関連する姫・卓記録を取得
4. UI実装

**見積もり:** 4時間  
**エピック:** Epic 4

---

#### US-013: キャスト追加・編集・削除機能実装
- **As a** ユーザー
- **I want to** キャストを追加・編集・削除できる
- **So that** スタッフ情報を管理できる

**受け入れ条件:**
- 姫と同様の追加・編集・削除フローが動作する
- フォームバリデーションが動作する

**技術タスク:**
1. `app/cast/add.tsx` 実装
2. `app/cast/edit/[id].tsx` 実装
3. `src/components/cast/CastForm.tsx` 作成
4. castStore連携

**見積もり:** 5時間  
**エピック:** Epic 4

---

#### US-014: 卓記録一覧画面実装
- **As a** ユーザー
- **I want to** 過去の卓記録を一覧で見られる
- **So that** 何があったか振り返れる

**受け入れ条件:**
- 卓記録がカード形式で一覧表示される
- 日時、姫の人数、キャストの人数が表示される
- 新しい順に並んでいる
- 空状態が適切に表示される

**技術タスク:**
1. `app/(tabs)/table.tsx` 実装
2. `src/components/table/TableCard.tsx` 作成
3. FlatListでリスト表示
4. tableStoreからデータ取得

**見積もり:** 4時間  
**エピック:** Epic 5

---

#### US-015: 卓記録詳細画面実装
- **As a** ユーザー
- **I want to** 卓記録の詳細を見られる
- **So that** 何があったか確認できる

**受け入れ条件:**
- 日時、卓番号が表示される
- 参加した姫のリストが表示される
- メインキャスト、ヘルプキャストが表示される
- メモが表示される

**技術タスク:**
1. `app/table/[id].tsx` 実装
2. TableRepositoryからデータ取得
3. 関連する姫・キャストを表示
4. UI実装

**見積もり:** 4時間  
**エピック:** Epic 5

---

#### US-016: 卓記録追加画面実装
- **As a** ユーザー
- **I want to** 新しい卓記録を作成できる
- **So that** 仕事の記録を残せる

**受け入れ条件:**
- 日時を選択できる（デフォルト：現在時刻）
- 卓番号を入力できる（任意）
- 姫を複数選択できる
- メインキャストを選択できる
- ヘルプキャストを複数選択できる
- メモを入力できる
- 保存ボタンでデータが登録される

**技術タスク:**
1. `app/table/add.tsx` 実装
2. `src/components/table/TableForm.tsx` 作成
3. DateTimePicker実装
4. 複数選択UI実装（姫、ヘルプ）
5. tableStore.addTable() 呼び出し

**見積もり:** 6時間  
**エピック:** Epic 5

---

#### US-017: 卓記録編集・削除機能実装
- **As a** ユーザー
- **I want to** 卓記録を編集・削除できる
- **So that** 間違いを修正できる

**受け入れ条件:**
- 既存データがフォームに表示される
- 全ての項目が編集できる
- 削除確認ダイアログが表示される

**技術タスク:**
1. `app/table/edit/[id].tsx` 実装
2. TableForm コンポーネントを再利用
3. tableStore.updateTable() 実装
4. 削除機能実装

**見積もり:** 4時間  
**エピック:** Epic 5

---

#### US-018: ホーム画面実装
- **As a** ユーザー
- **I want to** 今日の予定や直近の卓記録を一目で見られる
- **So that** すぐに必要な情報を確認できる

**受け入れ条件:**
- 今日の来店予定が表示される
- 直近の卓記録（5件）が表示される
- 今月の誕生日リストが表示される
- 各セクションから詳細画面に遷移できる
- 空状態が適切に表示される

**技術タスク:**
1. `app/(tabs)/index.tsx` 実装
2. ScheduleRepository.findToday() 呼び出し
3. TableRepository.getRecentTables() 呼び出し
4. HimeRepository.findBirthdayThisMonth() 呼び出し
5. セクション別のカード実装

**見積もり:** 5時間  
**エピック:** Epic 6

---

### 優先度: P1 (High) - Phase 1

#### US-019: カレンダー月表示実装
- **As a** ユーザー
- **I want to** カレンダーで月表示ができる
- **So that** 来店状況を把握できる

**受け入れ条件:**
- カレンダーが月表示される
- 卓記録がある日にマーカーが表示される
- 誕生日にマーカーが表示される
- 日付をタップすると詳細が表示される

**技術タスク:**
1. `app/(tabs)/calendar.tsx` 実装
2. react-native-calendars インストール・設定
3. `src/components/calendar/CalendarView.tsx` 作成
4. マーカー表示ロジック実装
5. 日付タップ時の詳細表示

**見積もり:** 5時間  
**エピック:** Epic 7

---

#### US-020: カレンダー週表示・日表示実装
- **As a** ユーザー
- **I want to** 週表示・日表示に切り替えられる
- **So that** より詳細にスケジュールを見られる

**受け入れ条件:**
- 月/週/日の切り替えボタンが動作する
- 週表示で1週間分が表示される
- 日表示で1日のスケジュールが表示される

**技術タスク:**
1. 表示モード切り替えState実装
2. WeekCalendar コンポーネント実装
3. DayCalendar コンポーネント実装
4. 各モードでのデータ取得

**見積もり:** 4時間  
**エピック:** Epic 7

---

#### US-021: 来店予定追加機能実装
- **As a** ユーザー
- **I want to** カレンダーから来店予定を追加できる
- **So that** 予約を管理できる

**受け入れ条件:**
- カレンダーから日付を選択して予定追加できる
- 姫を選択できる
- 日時を設定できる
- メモを入力できる
- 保存後にカレンダーに反映される

**技術タスク:**
1. 予定追加ボタン実装
2. 予定追加モーダル実装
3. scheduleStore.addSchedule() 呼び出し
4. カレンダー更新

**見積もり:** 4時間  
**エピック:** Epic 7

---

#### US-022: 検索機能実装（姫・キャスト）
- **As a** ユーザー
- **I want to** 姫やキャストを名前で検索できる
- **So that** 素早く目的の情報を見つけられる

**受け入れ条件:**
- 検索バーが表示される
- 入力中にリアルタイムで絞り込まれる
- 検索結果が適切に表示される
- 検索結果が0件の場合のメッセージが表示される

**技術タスク:**
1. `src/components/common/SearchBar.tsx` 作成
2. デバウンス処理実装（300ms）
3. HimeRepository.search() 実装
4. CastRepository.search() 実装
5. 各一覧画面に検索バー追加

**見積もり:** 3時間  
**エピック:** Epic 8

---

#### US-023: 通知権限リクエスト実装
- **As a** ユーザー
- **I want to** 通知権限を許可できる
- **So that** 来店予定や誕生日の通知を受け取れる

**受け入れ条件:**
- 初回起動時に通知権限リクエストが表示される
- 許可/拒否が適切に処理される
- 設定画面から再度権限リクエストできる

**技術タスク:**
1. `src/utils/notification.ts` 作成
2. NotificationService実装
3. requestPermissions() 実装
4. アプリ起動時の権限チェック

**見積もり:** 2時間  
**エピック:** Epic 9

---

#### US-024: 来店予定通知実装
- **As a** ユーザー
- **I want to** 来店予定の通知を受け取れる
- **So that** 予定を忘れない

**受け入れ条件:**
- 設定した時間前に通知が届く
- 通知をタップするとアプリが開く
- 通知済みフラグが記録される

**技術タスク:**
1. scheduleVisitNotification() 実装
2. バックグラウンドタスク設定
3. 通知スケジューリング実装
4. 通知タップ時のディープリンク

**見積もり:** 5時間  
**エピック:** Epic 9

---

#### US-025: 誕生日通知実装
- **As a** ユーザー
- **I want to** 誕生日の通知を受け取れる
- **So that** お祝いを忘れない

**受け入れ条件:**
- 設定した日数前に通知が届く
- 姫とキャスト両方の誕生日に対応する
- 通知をタップすると詳細画面が開く

**技術タスク:**
1. scheduleBirthdayNotification() 実装
2. 日次バックグラウンドチェック実装
3. 誕生日リストの取得ロジック
4. 通知スケジューリング

**見積もり:** 4時間  
**エピック:** Epic 9

---

#### US-026: テーマ切り替え機能実装
- **As a** ユーザー
- **I want to** テーマを切り替えられる
- **So that** 好みの見た目で使える

**受け入れ条件:**
- 5種類のテーマが選択できる
- テーマ変更が即座に反映される
- 選択したテーマが保存される
- アプリ全体に適用される

**技術タスク:**
1. `src/constants/themes.ts` 作成
2. 全5テーマの定義
3. `src/hooks/useTheme.ts` 作成
4. settingsStore.setTheme() 実装
5. Context APIでテーマ配信

**見積もり:** 4時間  
**エピック:** Epic 10

---

#### US-027: 設定画面実装
- **As a** ユーザー
- **I want to** 各種設定を変更できる
- **So that** アプリを自分好みにカスタマイズできる

**受け入れ条件:**
- テーマ選択ができる
- 通知時間設定ができる
- 設定が保存される

**技術タスク:**
1. `app/settings.tsx` 実装
2. テーマ選択Picker実装
3. 通知時間設定入力実装
4. settingsStore連携

**見積もり:** 3時間  
**エピック:** Epic 10

---

### 優先度: P2 (Medium) - Phase 2

#### US-028: 写真選択機能実装
- **As a** ユーザー
- **I want to** カメラまたはギャラリーから写真を選択できる
- **So that** 姫やキャストの写真を登録できる

**受け入れ条件:**
- カメラで撮影できる
- ギャラリーから選択できる
- 選択した写真が表示される
- 写真がローカルに保存される

**技術タスク:**
1. expo-image-picker インストール
2. `src/utils/avatar.ts` 実装
3. pickImage() 実装
4. saveImage() 実装
5. フォームに写真選択ボタン追加

**見積もり:** 3時間  
**エピック:** Epic 11

---

#### US-029: アバター自動生成実装
- **As a** ユーザー
- **I want to** 写真がない場合に自動でアバターが生成される
- **So that** 視覚的に区別しやすくなる

**受け入れ条件:**
- 名前を元にアバターが生成される
- アバターが適切に表示される
- 複数のスタイルから選択できる

**技術タスク:**
1. @dicebear/core インストール
2. generateAvatar() 実装
3. AvatarStyle enum定義
4. Avatar コンポーネント実装
5. 各カード・詳細画面に適用

**見積もり:** 3時間  
**エピック:** Epic 11

---

#### US-030: データエクスポート機能実装
- **As a** ユーザー
- **I want to** データをエクスポートできる
- **So that** バックアップを取れる

**受け入れ条件:**
- JSON形式でエクスポートできる
- 全てのテーブルデータが含まれる
- ファイルが端末に保存される
- 共有できる

**技術タスク:**
1. exportData() 実装
2. 全テーブルデータ取得
3. JSON形式に変換
4. expo-file-system で保存
5. expo-sharing で共有

**見積もり:** 4時間  
**エピック:** Epic 12

---

#### US-031: データインポート機能実装
- **As a** ユーザー
- **I want to** データをインポートできる
- **So that** バックアップから復元できる

**受け入れ条件:**
- JSON形式のファイルを選択できる
- データが正しく復元される
- 既存データとの競合を処理できる
- 復元確認ダイアログが表示される

**技術タスク:**
1. importData() 実装
2. ファイル選択UI実装
3. JSONパース・バリデーション
4. トランザクション処理
5. エラーハンドリング

**見積もり:** 5時間  
**エピック:** Epic 12

---

#### US-032: 全データ削除機能実装
- **As a** ユーザー
- **I want to** 全データを削除できる
- **So that** アプリをリセットできる

**受け入れ条件:**
- 削除前に確認ダイアログが表示される
- 「本当に削除しますか？」の二重確認がある
- 全テーブルがクリアされる
- 初期設定が再作成される

**技術タスク:**
1. deleteAllData() 実装
2. 確認ダイアログ実装（二重確認）
3. DROP TABLE + CREATE TABLE 実行
4. 初期設定の再挿入

**見積もり:** 2時間  
**エピック:** Epic 12

---

### 優先度: P3 (Low) - Phase 3

#### US-033: 統計ダッシュボード実装
- **As a** ユーザー
- **I want to** 統計情報を見られる
- **So that** 業務を分析できる

**受け入れ条件:**
- 月間来店数が表示される
- 人気の姫ランキングが表示される
- キャスト別の卓数が表示される

**技術タスク:**
1. 統計画面作成
2. 集計クエリ実装
3. グラフ表示（react-native-chart-kit等）

**見積もり:** 6時間

---

#### US-034: タグ機能実装
- **As a** ユーザー
- **I want to** 姫やキャストにタグを付けられる
- **So that** カテゴリ分けできる

**受け入れ条件:**
- タグの追加・削除ができる
- タグでフィルタリングできる

**技術タスク:**
1. tagsテーブル追加
2. 多対多リレーション実装
3. タグ選択UI実装

**見積もり:** 5時間

---

## 4. スプリント計画

### Phase 1: MVP開発（6週間）

#### Sprint 1: 環境構築・データベース基盤（1週間）
- US-001: プロジェクト初期化
- US-002: データベーススキーマ作成
- US-003: データベースリポジトリ実装
- US-004: Zustand状態管理セットアップ
- US-005: タブナビゲーション実装

**ゴール:** 開発基盤が整い、空の画面が表示される

---

#### Sprint 2: 姫管理機能（1週間）
- US-006: 姫一覧画面実装
- US-007: 姫詳細画面実装
- US-008: 姫追加画面実装

**ゴール:** 姫の追加・閲覧ができる

---

#### Sprint 3: 姫管理機能完成・キャスト管理開始（1週間）
- US-009: 姫編集画面実装
- US-010: 姫削除機能実装
- US-011: キャスト一覧画面実装
- US-012: キャスト詳細画面実装

**ゴール:** 姫管理が完成、キャスト管理が進む

---

#### Sprint 4: キャスト管理完成・卓記録開始（1週間）
- US-013: キャスト追加・編集・削除機能実装
- US-014: 卓記録一覧画面実装
- US-015: 卓記録詳細画面実装

**ゴール:** キャスト管理が完成、卓記録の閲覧ができる

---

#### Sprint 5: 卓記録機能完成・ホーム画面（1週間）
- US-016: 卓記録追加画面実装
- US-017: 卓記録編集・削除機能実装
- US-018: ホーム画面実装

**ゴール:** 卓記録管理が完成、ホーム画面が表示される

---

#### Sprint 6: カレンダー機能（1週間）
- US-019: カレンダー月表示実装
- US-020: カレンダー週表示・日表示実装
- US-021: 来店予定追加機能実装

**ゴール:** MVP完成、基本機能が全て動作する

---

### Phase 2: 拡張機能（3週間）

#### Sprint 7: 検索・通知機能（1週間）
- US-022: 検索機能実装（姫・キャスト）
- US-023: 通知権限リクエスト実装
- US-024: 来店予定通知実装

**ゴール:** 検索と通知が動作する

---

#### Sprint 8: 通知完成・テーマ機能（1週間）
- US-025: 誕生日通知実装
- US-026: テーマ切り替え機能実装
- US-027: 設定画面実装

**ゴール:** 通知とテーマ切り替えが完成

---

#### Sprint 9: 写真・アバター機能（1週間）
- US-028: 写真選択機能実装
- US-029: アバター自動生成実装

**ゴール:** 写真・アバター機能が動作する

---

### Phase 3: 改善・仕上げ（1週間）

#### Sprint 10: バックアップ・最終調整（1週間）
- US-030: データエクスポート機能実装
- US-031: データインポート機能実装
- US-032: 全データ削除機能実装
- バグ修正
- パフォーマンス最適化
- UI/UX調整

**ゴール:** アプリが完成し、リリース可能な状態になる

---

## 5. 技術的負債・リスク管理

### 5.1 技術的負債
- **データベースマイグレーション**: 将来的なスキーマ変更に備える
- **エラーログ収集**: Sentryなどの導入を検討
- **パフォーマンス監視**: 大量データ時の動作確認

### 5.2 リスク
| リスク | 影響 | 対策 |
|--------|------|------|
| Expo Goの制限 | 中 | 必要に応じてEAS Build移行 |
| SQLite容量制限 | 低 | 定期的なデータクリーンアップ推奨 |
| 通知が届かない | 中 | 権限チェック・エラーハンドリング強化 |
| 端末依存のバグ | 中 | iOS/Android両方で実機テスト |

---

## 6. 開発環境・ツール

### 6.1 開発環境
- **エディタ**: Visual Studio Code / Cursor
- **端末**: iOS Simulator / Android Emulator / 実機
- **ブラウザ**: Chrome DevTools（デバッグ用）

### 6.2 必須ツール
- Node.js 18.x以上
- Expo CLI
- Git

### 6.3 推奨VS Code拡張機能
- ESLint
- Prettier
- React Native Tools
- TypeScript and JavaScript Language Features

---

## 7. テスト戦略

### 7.1 手動テスト
- 各ユーザーストーリーの受け入れ基準を確認
- iOS/Android両方で動作確認
- エッジケース（空データ、大量データ）テスト

### 7.2 テストシナリオ
1. **姫管理フロー**
   - 姫追加 → 一覧表示 → 詳細表示 → 編集 → 削除
2. **卓記録フロー**
   - 卓記録追加（姫・キャスト選択） → 一覧表示 → 詳細表示
3. **通知フロー**
   - 来店予定追加 → 通知時刻待機 → 通知受信確認
4. **テーマ切り替えフロー**
   - テーマ変更 → 全画面での反映確認

---

## 8. 完成基準

### 8.1 機能完成基準
- [ ] 全ての優先度P0（Critical）ユーザーストーリーが実装済み
- [ ] 全ての優先度P1（High）ユーザーストーリーが実装済み
- [ ] iOS/Android両方で動作確認済み
- [ ] 通知が正しく動作する
- [ ] データの永続化が動作する

### 8.2 品質基準
- [ ] TypeScriptエラーなし
- [ ] ESLintエラーなし
- [ ] クラッシュするバグなし
- [ ] レスポンスが遅い箇所なし
- [ ] UI崩れなし

### 8.3 ドキュメント基準
- [ ] README.md作成済み
- [ ] セットアップ手順記載済み
- [ ] 主要機能の使い方記載済み

---

## 9. リリース計画

### 9.1 リリース前チェックリスト
- [ ] 全機能の動作確認
- [ ] アイコン・スプラッシュ画像設定
- [ ] app.json設定確認
- [ ] バージョン番号設定
- [ ] プライバシーポリシー準備（必要な場合）

### 9.2 リリース方法
- **開発版**: Expo Go経由で配布
- **本番版**: EAS Buildでスタンドアロンアプリ作成

```bash
# 開発版
npx expo start

# 本番版ビルド
eas build --platform all
```

---

## 10. ドキュメント計画

### 10.1 開発ドキュメント
- **設計書**: 完成済み
- **実装計画書**: 本ドキュメント
- **要件定義書**: 次に作成

### 10.2 ユーザードキュメント
- **README.md**: セットアップ手順、使い方
- **CHANGELOG.md**: バージョンごとの変更履歴

---

## 11. 次のアクション

### 11.1 即座に実施すること
1. 要件定義書を作成
2. Expo プロジェクトを初期化（US-001）
3. ディレクトリ構造を作成
4. データベーススキーマを実装（US-002）

### 11.2 Sprint 1で実施すること
- US-001からUS-005まで順番に実装
- 動作確認しながら進める
- 問題があれば設計書を見直す

---

## まとめ

この実装計画書に従って開発を進めることで、体系的かつ効率的にHostNoteアプリを完成させることができます。

**重要なポイント:**
- ✅ ユーザーストーリー単位で実装
- ✅ 1週間スプリントで進捗管理
- ✅ 各スプリント終了時に動作確認
- ✅ Phase 1（6週間）でMVP完成
- ✅ Phase 2-3で拡張機能追加

次は **要件定義書** を作成します！
